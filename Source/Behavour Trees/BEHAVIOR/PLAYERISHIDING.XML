<?xml version="1.0" encoding="utf-8"?>
<Behavior>
  <Node Class="Brainiac.Design.Nodes.Behavior">
    <Comment Background="NoColor:0" Text="This is the hiding branch.  Still a bit of a work in progress.  We may need to add a simulated noise into the system" />
    <Connector Identifier="GenericChildren">
      <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="PLAYER_HIDING_BRANCH:48">
        <Connector Identifier="GenericChildren">
          <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="30" TimerType="SUSPECT_TARGET_RESPONSE_DELAY_TIMER:0">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="25" TimerType="HEIGHTENED_SENSES_TIMER:15">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="SUSPICIOUS:3">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ConditionLogicCharacterFlags" FlagType="PLAYER_HIDING:8">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_89">
                            <Connector Identifier="GenericChildren">
                              <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                </Connector>
                              </Node>
                              <Node Class="LegendPlugin.Nodes.ConditionIsPerformingRoleOrCouldPerformRole" QueryID="86" RoleType="HIDING_PLAYER:11">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                </Connector>
                              </Node>
                              <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_24">
                                <Connector Identifier="GenericChildren">
                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_28">
                                    <Comment Background="NoColor:0" Text="If the player fails the breathing game - then run in, until someone is within range to attack (when the flag will be cleared)" />
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ConditionTargetLogicCharacterFlags" FlagType="ATTACK_HIDING_PLAYER:9">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionTargetLogicCharacterFlags" FlagType="ATTACK_HIDING_PLAYER:9">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionMoveToNearestStandingPointToTarget" MovementSpeedType="Fastest:3" PlayStoppingAnim="True" RequestShutDownSpeed="SST_GRACEFULL:0" StoppingDistance="1" />
                                        </Connector>
                                        <Connector Identifier="ConditionFalse">
                                          <Node Class="LegendPlugin.Nodes.ActionIdleTimeFacingTarget" NoiseTime="0" RequestShutDownSpeed="SST_GRACEFULL:0" Time="5" />
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_172">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ActionSetFrameFlag" FrameFlag="COULD_RESPOND_TO_HIDING_PLAYER:4" />
                                      <Node Class="LegendPlugin.Nodes.ActionFail" />
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
        </Connector>
      </Node>
    </Connector>
  </Node>
</Behavior>