<?xml version="1.0" encoding="utf-8"?>
<Behavior>
  <Node Class="Brainiac.Design.Nodes.Behavior">
    <Connector Identifier="GenericChildren">
      <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="BACKSTAGE_AREA_SWEEP_BRANCH:9">
        <Connector Identifier="GenericChildren">
          <Node Class="LegendPlugin.Nodes.SequenceStateless" ChildStateType="CHILD_DEFAULT:0" Name="STATELESS_10">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_37">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.ConditionDebugMenuLinkTest" DefaultBehaviour="False" In_Game_Menu_Text="Force_Backstage_Stalk">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                    </Connector>
                  </Node>
                  <Node Class="LegendPlugin.Nodes.ConditionWithdrawState" WithdrawState="NEEDS_TO_WITHDRAW:1">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                    </Connector>
                  </Node>
                  <Node Class="LegendPlugin.Nodes.ConditionWithdrawState" WithdrawState="WITHDRAWING:2">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
              <Node Class="LegendPlugin.Nodes.ConditionCanBreakout">
                <Comment Background="NoColor:0" Text="Once levels are correctly marked up, remove CanBreakout" />
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_70">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="-1" TimerType="BACKSTAGE_STALK_TIMEOUT_TIMER:4" />
                      <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="-1" TimerType="BACKSTAGE_STALK_PICK_KILLTRAP_TIMER:16" />
                      <Node Class="LegendPlugin.Nodes.ActionExpireTimer" TimerType="AMBUSH_TIMEOUT_TIMER:5" />
                      <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_38">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.ConditionLogicCharacterFlags" FlagType="LOCK_BACKSTAGE_STALK:13">
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="BACKSTAGE_STALK_TIMEOUT_TIMER:4">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ConditionHasKilltrap">
                                    <Connector Identifier="ConditionFalse">
                                      <Node Class="LegendPlugin.Nodes.ActionSetWithdrawState" WithdrawState="NOT_WITHDRAWING:0" />
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ConditionDebugMenuLinkTest" DefaultBehaviour="False" In_Game_Menu_Text="killtraps to end backstage">
                            <Connector Identifier="ConditionTrue">
                              <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="BACKSTAGE_STALK_PICK_KILLTRAP_TIMER:16">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ConditionAlienIsAllowed" AlienAction="WILL_KILLTRAP:3">
                                    <Connector Identifier="ConditionTrue">
                                      <Node Class="LegendPlugin.Nodes.ActionBackstageAreaSweep" BackstageBehaviour="ALLOW_KILLTRAP:1" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ActionBackstageAreaSweep" BackstageBehaviour="BACKSTAGE_ONLY:0" RequestShutDownSpeed="SST_GRACEFULL:0" />
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
                <Connector Identifier="ConditionFalse">
                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_90">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ActionAssert" AssertInfo="Error - level has no backstage." />
                      <Node Class="LegendPlugin.Nodes.ActionFail" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
        </Connector>
      </Node>
    </Connector>
  </Node>
</Behavior>