<?xml version="1.0" encoding="utf-8"?>
<Behavior>
  <Node Class="Brainiac.Design.Nodes.Behavior">
    <Connector Identifier="GenericChildren">
      <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_71">
        <Connector Identifier="GenericChildren">
          <Node Class="LegendPlugin.Nodes.ConditionHaveNextTarget">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_121">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.ActionSwitchToNextTarget" />
                  <Node Class="LegendPlugin.Nodes.ConditionIsEnemyOfTarget">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                    </Connector>
                    <Connector Identifier="ConditionFalse">
                      <Node Class="LegendPlugin.Nodes.ActionAssert" AssertInfo="Targeting non-enemy characters unsupported by NPC_Human_behave" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="PRIMARY_CONTROL_RESPONSE_BRANCH:29">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionRequiresPrimaryDamageControlResponse">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ActionApplyPrimaryDamageControlResponse" RequestShutDownSpeed="SST_GRACEFULL:0" />
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="SUSPEND_BRANCH:46">
            <Comment Background="Green:3" Text="For Load Save - and maybe one day for AI Lodding" />
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionShouldSuspend">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ActionSuspend" RequestShutDownSpeed="SST_GRACEFULL:0" />
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.ConditionLogicCharacterFlags" FlagType="SHOULD_RESET:1">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_105">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.ActionSetLogicCharacterFlags" Flag="False" FlagType="SHOULD_RESET:1" />
                  <Node Class="LegendPlugin.Nodes.ActionIdleTime" NoiseTime="0" RequestShutDownSpeed="SST_GRACEFULL:0" Time="0.01" />
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="DEAD_BRANCH:30">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="DEAD:0">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.ConditionIsDead">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionDead" RequestShutDownSpeed="SST_GRACEFULL:0" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_programmer_control.xml" />
          <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="CINEMATIC_MOTIVATION:0">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="CINEMATIC_BRANCH:1">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.ConditionHasScript">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ActionScript" RequestShutDownSpeed="SST_GRACEFULL:0" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_62">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="100" TimerType="SEEN_PLAYER_AIM_WEAPON_TIMER:21" />
                      <Node Class="LegendPlugin.Nodes.ActionFail" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="AGRESSIVE_BRANCH:35">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionHasAlertnessState" AlertnessState="AGGRESSIVE:2">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.DecoratorMood" MoodSet="PANICKED:4">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ConditionHasAnySenseBeenAboveWithinTime" ThresholdQualifier="LOWER_THRESHOLD:1" TimeConstraint="40">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_14">
                            <Connector Identifier="GenericChildren">
                              <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_cover.xml" />
                              <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_panic.xml" />
                              <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ActionIdleTimeFacingTarget" NoiseTime="0" RequestShutDownSpeed="SST_GRACEFULL:0" Time="5" />
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.ConditionHasAlertnessState" AlertnessState="AGGRESSIVE:2">
            <Connector Identifier="ConditionFalse">
              <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                    <Connector Identifier="ConditionFalse">
                      <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_61_CLONE">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.ConditionIsCharacterClass" CharacterClass="CIVILIAN:3" CharacterType="TARGET:1">
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ConditionIsCharacterClass" CharacterClass="INNOCENT:6" CharacterType="TARGET:1">
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ConditionIsCharacterClass" CharacterClass="SECURITY:4" CharacterType="TARGET:1">
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ConditionIsCharacterClass" CharacterClass="ALIEN:1" CharacterType="TARGET:1">
                            <Connector Identifier="ConditionTrue">
                              <Node Class="LegendPlugin.Nodes.ActionNotifySquad" CombatState="ALIEN_SIGHTED:15" />
                            </Connector>
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ActionMakeAggressive" />
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.ConditionHasAlertnessState" AlertnessState="IGNORE_PLAYER:0">
            <Connector Identifier="ConditionFalse">
              <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="SUSPECT_TARGET_RESPONSE_MOTIVATION:9">
                <Connector Identifier="ConditionTrue">
                  <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_suspicious.xml" />
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="ALERT_BRANCH:36">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionHasAlertnessState" AlertnessState="ALERT:1">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="AWARE:6">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                            <Connector Identifier="ConditionTrue">
                              <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="AGGRESSION_ESCALATION_MOTIVATION:23">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_aggression_escalation.xml" />
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.ConditionHasAlertnessState" AlertnessState="IGNORE_PLAYER:0">
            <Connector Identifier="ConditionFalse">
              <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="REACT_TO_WEAPON_MOTIVATION:21">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.ConditionIsEnemyOfTarget">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_109">
                            <Connector Identifier="GenericChildren">
                              <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_78">
                                <Connector Identifier="GenericChildren">
                                  <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="False" SenseType="HEARD_COMBAT:1" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                    <Connector Identifier="ConditionTrue">
                                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                    </Connector>
                                  </Node>
                                  <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="False" SenseType="DAMAGED:4" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                    <Connector Identifier="ConditionTrue">
                                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                              <Node Class="LegendPlugin.Nodes.ActionMakeAggressive" />
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="FOLLOW_BRANCH:5">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionShouldFollow">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="UNAWARE:2">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ConditionIsPerformingRoleOrCouldPerformRole" QueryID="102" RoleType="FOLLOW:12">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.ActionPerformRole" QueryID="102" RequestShutDownSpeed="SST_GRACEFULL:0" RoleType="FOLLOW:12" />
                        </Connector>
                        <Connector Identifier="ConditionFalse">
                          <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_11">
                            <Connector Identifier="GenericChildren">
                              <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="get_out_of_way.xml" />
                              <Node Class="LegendPlugin.Nodes.ActionIdle" RequestShutDownSpeed="SST_GRACEFULL:0" />
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="SCRIPT_BRANCH:31">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionHasScript">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="UNAWARE:2">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ActionScript" RequestShutDownSpeed="SST_GRACEFULL:0" />
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="static_convo_behaviour.xml" />
          <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="IDLE_JOB_MOTIVATION:13">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="UNAWARE:2">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="IDLE_JOB_BRANCH:14">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.ConditionIsPerformingRoleOrCouldPerformRole" QueryID="96" RoleType="IDLE:0">
                        <Connector Identifier="ConditionTrue">
                          <Node Class="LegendPlugin.Nodes.ActionPerformRole" QueryID="96" RequestShutDownSpeed="SST_GRACEFULL:0" RoleType="IDLE:0" />
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="STANDARD_BRANCH:6">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.ConditionHasObjective" ObjectiveType="OBJECTIVE_TYPE_START_POS:1">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ConditionObjectiveIsWithinDistance" Distance="1" ObjectiveType="OBJECTIVE_TYPE_START_POS:1">
                    <Connector Identifier="ConditionFalse">
                      <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="UNAWARE:2">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_45">
                            <Connector Identifier="GenericChildren">
                              <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="15" TimerType="DELAY_RETURN_TO_SPAWN_POINT_TIMER:13" />
                              <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="DELAY_RETURN_TO_SPAWN_POINT_TIMER:13">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ActionMoveToObjective" MovementSpeedType="Slow:1" ObjectiveType="OBJECTIVE_TYPE_START_POS:1" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                </Connector>
                                <Connector Identifier="ConditionFalse">
                                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_54">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="get_out_of_way.xml" />
                                      <Node Class="LegendPlugin.Nodes.DecoratorMood" MoodSet="NEUTRAL:0">
                                        <Connector Identifier="GenericChildren">
                                          <Node Class="LegendPlugin.Nodes.ActionIdle" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
          <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="IDLE_BRANCH:32">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="UNAWARE:2">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_59">
                    <Connector Identifier="GenericChildren">
                      <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="get_out_of_way.xml" />
                      <Node Class="LegendPlugin.Nodes.DecoratorMood" MoodSet="NEUTRAL:0">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.ActionIdle" RequestShutDownSpeed="SST_GRACEFULL:0" />
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
        </Connector>
      </Node>
    </Connector>
  </Node>
</Behavior>