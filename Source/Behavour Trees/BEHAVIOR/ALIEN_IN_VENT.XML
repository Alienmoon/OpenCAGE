<?xml version="1.0" encoding="utf-8"?>
<Behavior>
  <Node Class="Brainiac.Design.Nodes.Behavior">
    <Connector Identifier="GenericChildren">
      <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="IN_VENT_BRANCH:23">
        <Comment Background="Blue:1" Text="VENT_BAN_TIMER &amp; VENT_ATTRACT_TIMER are partly managed in code" />
        <Connector Identifier="GenericChildren">
          <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
            <Connector Identifier="ConditionTrue">
              <Node Class="LegendPlugin.Nodes.ConditionIsEnemyOfTarget">
                <Connector Identifier="ConditionTrue">
                  <Node Class="LegendPlugin.Nodes.ConditionIsInVent" CharacterType="TARGET:1">
                    <Connector Identifier="ConditionTrue">
                      <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_8">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="VENT_BAN_TIMER:8">
                            <Comment Background="Red:2" Text="Banned from vent - we will get the hell out!" />
                            <Connector Identifier="ConditionTrue">
                              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_22_CLONE_CLONE">
                                <Connector Identifier="GenericChildren">
                                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_ALIEN_FLAMED_P_INVENT_CLONE">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ConditionIsGaugeAmountAbove" GaugeAmountType="GAUGE_ACTIVATED:3" GaugeType="RETREAT_GAUGE:0" MustBeTriggered="False">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ConditionTargetIsWithinDistance" Distance="1.5">
                                            <Connector Identifier="ConditionTrue">
                                              <Node Class="LegendPlugin.Nodes.ConditionIsInVent" CharacterType="OWNER:0">
                                                <Connector Identifier="ConditionFalse">
                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                </Connector>
                                              </Node>
                                            </Connector>
                                            <Connector Identifier="ConditionFalse">
                                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                            </Connector>
                                          </Node>
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionDebugMenuLinkTest" DefaultBehaviour="False" In_Game_Menu_Text="FAKE_FLAMETHROWER">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ConditionTargetIsWithinDistance" Distance="4">
                                            <Connector Identifier="ConditionTrue">
                                              <Node Class="LegendPlugin.Nodes.ConditionTargetIsWithinDistance" Distance="2">
                                                <Connector Identifier="ConditionFalse">
                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                </Connector>
                                              </Node>
                                            </Connector>
                                          </Node>
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                  <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="30" TimerType="VENT_BAN_TIMER:8" />
                                </Connector>
                              </Node>
                            </Connector>
                            <Connector Identifier="ConditionFalse">
                              <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_9">
                                <Connector Identifier="GenericChildren">
                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_19">
                                    <Comment Background="Green:3" Text="This is a back up case: if we end up running at the player anyways, then we will attack attack attack.  Should only happen if affected by flamethrower (the thing that gets us out of a vent) has let us down!" />
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ConditionIsInVent" CharacterType="OWNER:0">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionTargetIsWithinDistance" Distance="1.5">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionAngleToTargetLessThan" Angle="60">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionHasMeleeAttackAvailableOrIsAttacking" AttackType="VENT:3">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionMeleeAttack" AttackType="ANY:0" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_20">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ConditionIsInVent" CharacterType="OWNER:0">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ActionSetWithdrawState" WithdrawState="NOT_WITHDRAWING:0" />
                                      <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="True" Time="30" TimerType="SUSPECT_TARGET_RESPONSE_DELAY_TIMER:0" />
                                      <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="True" Time="25" TimerType="HEIGHTENED_SENSES_TIMER:15" />
                                      <Node Class="LegendPlugin.Nodes.ActionStartTimerRandom" MaxTime="-1" MinTime="-1" TimerType="VENT_ATTRACT_TIMER:20" />
                                      <Node Class="LegendPlugin.Nodes.ActionSetLogicCharacterFlags" Flag="True" FlagType="SHOULD_BREAKOUT:4" />
                                      <Node Class="LegendPlugin.Nodes.ActionExpireTimer" TimerType="THREAT_AWARE_TIMEOUT_TIMER:1" />
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.ConditionIsInVent" CharacterType="OWNER_AND_TARGET:2">
                            <Connector Identifier="ConditionTrue">
                              <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="10" TimerType="SUSPECT_TARGET_RESPONSE_DELAY_TIMER:0">
                                <Connector Identifier="GenericChildren">
                                  <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="5" TimerType="HEIGHTENED_SENSES_TIMER:15">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_8_CLONE">
                                        <Connector Identifier="GenericChildren">
                                          <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="THREAT_AWARE_MOTIVATION:10">
                                            <Connector Identifier="ConditionTrue">
                                              <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="alien_in_vent_threat_aware.xml" />
                                            </Connector>
                                          </Node>
                                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_23">
                                            <Connector Identifier="GenericChildren">
                                              <Node Class="LegendPlugin.Nodes.ConditionHasMeleeAttackAvailableOrIsAttacking" AttackType="VENT:3">
                                                <Connector Identifier="ConditionTrue">
                                                  <Node Class="LegendPlugin.Nodes.ActionMeleeAttack" AttackType="ANY:0" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                                </Connector>
                                              </Node>
                                              <Node Class="LegendPlugin.Nodes.ActionStartTimer" OnlyIncreaseExistingEndTime="False" Time="20" TimerType="VENT_BAN_TIMER:8" />
                                            </Connector>
                                          </Node>
                                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_23_CLONE">
                                            <Connector Identifier="GenericChildren">
                                              <Node Class="LegendPlugin.Nodes.ActionSetWithdrawState" WithdrawState="NOT_WITHDRAWING:0" />
                                              <Node Class="LegendPlugin.Nodes.ActionMoveThroughTarget" MovementSpeedType="Fastest:3" RequestShutDownSpeed="SST_GRACEFULL:0" />
                                            </Connector>
                                          </Node>
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQ_24_CLONE">
                            <Connector Identifier="GenericChildren">
                              <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="NPC_JUST_LEFT_COMBAT_TIMER:9">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_8_CLONE_CLONE">
                                    <Connector Identifier="GenericChildren">
                                      <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="HEARD_MOVEMENT:3" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="SEE_FLASH_LIGHT:7" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="AFFECTED_BY_FLAME_THROWER:6" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionLogicCharacterFlags" FlagType="ALIEN_ALWAYS_KNOWS_WHEN_IN_VENT:10">
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                        </Connector>
                                      </Node>
                                      <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="VENT_ATTRACT_TIMER:20">
                                        <Comment Background="NoColor:0" Text="This timer gtets started IN CODE when the player enters a vent" />
                                        <Connector Identifier="ConditionTrue">
                                          <Node Class="LegendPlugin.Nodes.ConditionWithdrawState" WithdrawState="WITHDRAWING:2">
                                            <Connector Identifier="ConditionTrue">
                                              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_29">
                                                <Connector Identifier="GenericChildren">
                                                  <Node Class="LegendPlugin.Nodes.ActionStartTimerRandom" MaxTime="-1" MinTime="-1" TimerType="VENT_ATTRACT_TIMER:20" />
                                                  <Node Class="LegendPlugin.Nodes.ActionFail" />
                                                </Connector>
                                              </Node>
                                            </Connector>
                                            <Connector Identifier="ConditionFalse">
                                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                            </Connector>
                                          </Node>
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                              <Node Class="LegendPlugin.Nodes.ActionSetWithdrawState" WithdrawState="NOT_WITHDRAWING:0" />
                              <Node Class="LegendPlugin.Nodes.ActionMoveThroughTarget" MovementSpeedType="Fastest:3" RequestShutDownSpeed="SST_GRACEFULL:0" />
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
        </Connector>
      </Node>
    </Connector>
  </Node>
</Behavior>