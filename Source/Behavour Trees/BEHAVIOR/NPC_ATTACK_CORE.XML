<?xml version="1.0" encoding="utf-8"?>
<Behavior>
  <Node Class="Brainiac.Design.Nodes.Behavior">
    <Connector Identifier="GenericChildren">
      <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="ATTACK_BRANCH:2">
        <Connector Identifier="GenericChildren">
          <Node Class="LegendPlugin.Nodes.DecoratorMood" MoodSet="AGGRESSIVE:3">
            <Connector Identifier="GenericChildren">
              <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="False" Time="60" TimerType="NPC_JUST_LEFT_COMBAT_TIMER:9">
                <Connector Identifier="GenericChildren">
                  <Node Class="LegendPlugin.Nodes.DecoratorAwarenessState" AwarenessState="AWARE:6">
                    <Connector Identifier="GenericChildren">
                      <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="60" TimerType="SUSPECT_TARGET_RESPONSE_DELAY_TIMER:0">
                        <Connector Identifier="GenericChildren">
                          <Node Class="LegendPlugin.Nodes.DecoratorTimer" OnlyIncreaseExistingEndTime="True" Time="55" TimerType="HEIGHTENED_SENSES_TIMER:15">
                            <Connector Identifier="GenericChildren">
                              <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                                <Connector Identifier="ConditionTrue">
                                  <Node Class="LegendPlugin.Nodes.ConditionIsEnemyOfTarget">
                                    <Connector Identifier="ConditionTrue">
                                      <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="attacking">
                                        <Connector Identifier="GenericChildren">
                                          <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="TOUCHED:5" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                            <Connector Identifier="ConditionTrue">
                                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                            </Connector>
                                            <Connector Identifier="ConditionFalse">
                                              <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                <Connector Identifier="ConditionTrue">
                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                </Connector>
                                                <Connector Identifier="ConditionFalse">
                                                  <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="False" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                    <Connector Identifier="ConditionTrue">
                                                      <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="COMBINED:8" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                        <Connector Identifier="ConditionTrue">
                                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                        </Connector>
                                                      </Node>
                                                    </Connector>
                                                  </Node>
                                                </Connector>
                                              </Node>
                                            </Connector>
                                          </Node>
                                          <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="IGNORE_CHILD_FAIL:1" Name="SEQUENCE_15">
                                            <Connector Identifier="GenericChildren">
                                              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="combat or advance">
                                                <Connector Identifier="GenericChildren">
                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                  <Node Class="LegendPlugin.Nodes.ActionNotifySquad" CombatState="ATTACKING:2" />
                                                  <Node Class="LegendPlugin.Nodes.ActionExpireTimer" TimerType="SEARCH_BAN_TIMER:22" />
                                                  <Node Class="LegendPlugin.Nodes.SequenceStateless" ChildStateType="CHILD_DEFAULT:0" Name="STATELESS_23">
                                                    <Connector Identifier="GenericChildren">
                                                      <Node Class="LegendPlugin.Nodes.SequenceStateless" ChildStateType="CHILD_DEFAULT:0" Name="STATELESS_7">
                                                        <Connector Identifier="GenericChildren">
                                                          <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                                                            <Connector Identifier="ConditionTrue">
                                                              <Node Class="LegendPlugin.Nodes.ConditionIsInTargetsWeaponRange" WeaponRange="WRT_MAX_RANGE:2">
                                                                <Connector Identifier="ConditionTrue">
                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                </Connector>
                                                                <Connector Identifier="ConditionFalse">
                                                                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_21">
                                                                    <Connector Identifier="GenericChildren">
                                                                      <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="SEEN_PLAYER_AIM_WEAPON_TIMER:21">
                                                                        <Connector Identifier="ConditionFalse">
                                                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                        </Connector>
                                                                      </Node>
                                                                      <Node Class="LegendPlugin.Nodes.ConditionLastTimeSensed" SenseType="COMBINED:8" ThresholdQualifier="ACTIVATED_THRESHOLD:2" TimeThreshold="TM_1:1">
                                                                        <Connector Identifier="ConditionTrue">
                                                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                        </Connector>
                                                                      </Node>
                                                                      <Node Class="LegendPlugin.Nodes.ConditionLastTimeSensed" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2" TimeThreshold="TM_1:1">
                                                                        <Connector Identifier="ConditionTrue">
                                                                          <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                        </Connector>
                                                                      </Node>
                                                                    </Connector>
                                                                  </Node>
                                                                </Connector>
                                                              </Node>
                                                            </Connector>
                                                            <Connector Identifier="ConditionFalse">
                                                              <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                            </Connector>
                                                          </Node>
                                                          <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SEL_60_CLONE">
                                                            <Connector Identifier="GenericChildren">
                                                              <Node Class="LegendPlugin.Nodes.ConditionLastTimeSensed" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2" TimeThreshold="TM_10:6">
                                                                <Connector Identifier="ConditionTrue">
                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                </Connector>
                                                              </Node>
                                                              <Node Class="LegendPlugin.Nodes.ConditionLastTimeSensed" SenseType="COMBINED:8" ThresholdQualifier="ACTIVATED_THRESHOLD:2" TimeThreshold="TM_10:6">
                                                                <Connector Identifier="ConditionTrue">
                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                </Connector>
                                                              </Node>
                                                            </Connector>
                                                          </Node>
                                                        </Connector>
                                                      </Node>
                                                      <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="attack core">
                                                        <Connector Identifier="GenericChildren">
                                                          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_draw_weapon.xml" />
                                                          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_player_in_exploitable_position.xml" />
                                                          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_player_in_vent.xml" />
                                                          <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="MELEE_MOTIVATION:16">
                                                            <Connector Identifier="ConditionTrue">
                                                              <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_melee_human_attack.xml" />
                                                            </Connector>
                                                          </Node>
                                                          <Node Class="LegendPlugin.Nodes.ConditionShouldUseCover">
                                                            <Connector Identifier="ConditionTrue">
                                                              <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="USE_COVER_MOTIVATION:14">
                                                                <Connector Identifier="ConditionTrue">
                                                                  <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_cover.xml" />
                                                                </Connector>
                                                              </Node>
                                                            </Connector>
                                                          </Node>
                                                        </Connector>
                                                      </Node>
                                                    </Connector>
                                                  </Node>
                                                </Connector>
                                              </Node>
                                              <Node Class="LegendPlugin.Nodes.DecoratorBranch" BranchType="CLOSE_COMBAT_BRANCH:24">
                                                <Connector Identifier="GenericChildren">
                                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="advancing">
                                                    <Connector Identifier="GenericChildren">
                                                      <Node Class="LegendPlugin.Nodes.ActionNotifySquad" CombatState="START_ADVANCE:11" />
                                                      <Node Class="LegendPlugin.Nodes.ConditionLastTimeSensed" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2" TimeThreshold="TM_30:10">
                                                        <Connector Identifier="ConditionTrue">
                                                          <Node Class="LegendPlugin.Nodes.ConditionHaveTarget">
                                                            <Connector Identifier="ConditionTrue">
                                                              <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="move forward">
                                                                <Connector Identifier="GenericChildren">
                                                                  <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                                    <Connector Identifier="ConditionTrue">
                                                                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                    </Connector>
                                                                    <Connector Identifier="ConditionFalse">
                                                                      <Node Class="LegendPlugin.Nodes.ActionMoveToMostRecentSensedPosition" MovementSpeedType="Fast:2" RequestShutDownSpeed="SST_GRACEFULL:0" ShouldAim="False" />
                                                                    </Connector>
                                                                  </Node>
                                                                  <Node Class="LegendPlugin.Nodes.ActionExpireTimer" TimerType="SEEN_PLAYER_AIM_WEAPON_TIMER:21" />
                                                                  <Node Class="LegendPlugin.Nodes.SelectorLinear" Name="SELECTOR_8">
                                                                    <Connector Identifier="GenericChildren">
                                                                      <Node Class="LegendPlugin.Nodes.ConditionHasMotivation" MotivationType="MELEE_MOTIVATION:16">
                                                                        <Connector Identifier="ConditionTrue">
                                                                          <Node Class="Brainiac.Design.Nodes.ReferencedBehavior" ReferenceFilename="NPC_melee_human_attack.xml" />
                                                                        </Connector>
                                                                      </Node>
                                                                      <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_19">
                                                                        <Connector Identifier="GenericChildren">
                                                                          <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="False" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                                            <Connector Identifier="ConditionTrue">
                                                                              <Node Class="LegendPlugin.Nodes.ConditionVisualSomeRaysThroughGlass">
                                                                                <Connector Identifier="ConditionTrue">
                                                                                  <Node Class="LegendPlugin.Nodes.SequenceLinear" ChildStateType="CHILD_DEFAULT:0" Name="SEQUENCE_13">
                                                                                    <Connector Identifier="GenericChildren">
                                                                                      <Node Class="LegendPlugin.Nodes.ActionRangedShoot" RequestShutDownSpeed="SST_GRACEFULL:0" ShootStraightAway="False" TerminationCondition="Shot_1:2" />
                                                                                      <Node Class="LegendPlugin.Nodes.ActionMoveToMostRecentSensedPosition" MovementSpeedType="Fast:2" RequestShutDownSpeed="SST_GRACEFULL:0" ShouldAim="False" />
                                                                                    </Connector>
                                                                                  </Node>
                                                                                </Connector>
                                                                                <Connector Identifier="ConditionFalse">
                                                                                  <Node Class="LegendPlugin.Nodes.ActionRangedShoot" RequestShutDownSpeed="SST_GRACEFULL:0" ShootStraightAway="False" TerminationCondition="Shot_1:2" />
                                                                                </Connector>
                                                                              </Node>
                                                                            </Connector>
                                                                          </Node>
                                                                          <Node Class="LegendPlugin.Nodes.SequenceStateless" ChildStateType="CHILD_DEFAULT:0" Name="can see the player so shoot">
                                                                            <Connector Identifier="GenericChildren">
                                                                              <Node Class="LegendPlugin.Nodes.ConditionTargetIsPlayer">
                                                                                <Connector Identifier="ConditionTrue">
                                                                                  <Node Class="LegendPlugin.Nodes.ConditionHasTimerExpired" TimerType="SEEN_PLAYER_AIM_WEAPON_TIMER:21">
                                                                                    <Connector Identifier="ConditionTrue">
                                                                                      <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                                    </Connector>
                                                                                  </Node>
                                                                                </Connector>
                                                                                <Connector Identifier="ConditionFalse">
                                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                                </Connector>
                                                                              </Node>
                                                                              <Node Class="LegendPlugin.Nodes.ConditionVisualSomeRaysThroughGlass">
                                                                                <Connector Identifier="ConditionFalse">
                                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                                </Connector>
                                                                              </Node>
                                                                              <Node Class="LegendPlugin.Nodes.ConditionIsSenseActivationAbove" MustBeTriggered="True" SenseType="VISUAL:0" ThresholdQualifier="ACTIVATED_THRESHOLD:2">
                                                                                <Connector Identifier="ConditionTrue">
                                                                                  <Node Class="LegendPlugin.Nodes.ActionSuccess" />
                                                                                </Connector>
                                                                              </Node>
                                                                              <Node Class="LegendPlugin.Nodes.ConditionCurrentWeaponIsEquipped">
                                                                                <Connector Identifier="ConditionTrue">
                                                                                  <Node Class="LegendPlugin.Nodes.ActionRangedShoot" RequestShutDownSpeed="SST_GRACEFULL:0" ShootStraightAway="False" TerminationCondition="Continuous:0" />
                                                                                </Connector>
                                                                              </Node>
                                                                            </Connector>
                                                                          </Node>
                                                                        </Connector>
                                                                      </Node>
                                                                    </Connector>
                                                                  </Node>
                                                                </Connector>
                                                              </Node>
                                                            </Connector>
                                                          </Node>
                                                        </Connector>
                                                      </Node>
                                                    </Connector>
                                                  </Node>
                                                </Connector>
                                              </Node>
                                            </Connector>
                                          </Node>
                                        </Connector>
                                      </Node>
                                    </Connector>
                                  </Node>
                                </Connector>
                              </Node>
                            </Connector>
                          </Node>
                        </Connector>
                      </Node>
                    </Connector>
                  </Node>
                </Connector>
              </Node>
            </Connector>
          </Node>
        </Connector>
      </Node>
    </Connector>
  </Node>
</Behavior>